<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>GraphQL Ruby</title>
    <link rel="stylesheet" href="/stylesheet.css">
    <!-- you don't need to keep this, but it's cool for stats! -->
    <meta name="generator" content="Nanoc 4.2.3">
  </head>
  <body class="hack">
    <div class="container">
      <div style="display: flex; justify-content: center;">
<strong style="white-space: pre; line-height: 1.1em; display: inline-block;">
    ▄██████▄     ▄████████    ▄████████    ▄███████▄    ▄█    █▄    ████████▄    ▄█
   ███    ███   ███    ███   ███    ███   ███    ███   ███    ███   ███    ███  ███
   ███    █▀    ███    ███   ███    ███   ███    ███   ███    ███   ███    ███  ███
  ▄███         ▄███▄▄▄▄██▀   ███    ███   ███    ███  ▄███▄▄▄▄███▄▄ ███    ███  ███
 ▀▀███ ████▄  ▀▀███▀▀▀▀▀   ▀███████████ ▀█████████▀  ▀▀███▀▀▀▀███▀  ███    ███  ███
   ███    ███ ▀███████████   ███    ███   ███          ███    ███   ███    ███  ███
   ███    ███   ███    ███   ███    ███   ███          ███    ███   ███  ▀ ███  ███▌    ▄
   ████████▀    ███    ███   ███    █▀   ▄████▀        ███    █▀     ▀██████▀▄█ █████▄▄██
                ███    ███                                                      ▀
</strong>
      </div>
      <p style="text-align: center;">A GraphQL server implementation for Ruby</p>

      <div class="grid -between">
        <div class="cell -3of12">
          <h3><a href="/">Readme</a></h3>
          <h3>Guides</h3>
          <ul>
            <li><a href="/guides/introduction/">Introduction</a></li>
            <li><a href="/guides/defining_your_schema/">Defining a Schema</a></li>
            <li><a href="/guides/executing_queries/">Executing Queries</a></li>
            <li><a href="/guides/code_reuse/">Code Reuse</a></li>
            <li><a href="/guides/security/">Security</a></li>
            <li><a href="/guides/testing/">Testing</a></li>
          </ul>
          <h3><a href="http://www.rubydoc.info/github/rmosolgo/graphql-ruby">API Docs</a></h3>
          <h3><a href="https://github.com/rmosolgo/graphql-ruby">Source Code</a></h3>
        </div>
        <div class="cell -9of12">
          <div id="readme">
  <h1>graphql <img src="https://cloud.githubusercontent.com/assets/2231765/9094460/cb43861e-3b66-11e5-9fbf-71066ff3ab13.png" height=40 alt="graphql-ruby"/></h1>

<p><a href="https://travis-ci.org/rmosolgo/graphql-ruby"><img src="https://travis-ci.org/rmosolgo/graphql-ruby.svg?branch=master" alt="Build Status"></a>
<a href="https://rubygems.org/gems/graphql"><img src="https://badge.fury.io/rb/graphql.svg" alt="Gem Version"></a>
<a href="https://codeclimate.com/github/rmosolgo/graphql-ruby"><img src="https://codeclimate.com/github/rmosolgo/graphql-ruby/badges/gpa.svg" alt="Code Climate"></a>
<a href="https://codeclimate.com/github/rmosolgo/graphql-ruby"><img src="https://codeclimate.com/github/rmosolgo/graphql-ruby/badges/coverage.svg" alt="Test Coverage"></a>
<a href="http://rmosolgo.github.io/react-badges/"><img src="https://cloud.githubusercontent.com/assets/2231765/6766607/d07992c6-cfc9-11e4-813f-d9240714dd50.png" alt="built with love"></a></p>

<p>A Ruby implementation of <a href="http://graphql.org/">GraphQL</a>.</p>

<ul>
<li><p>Guides</p>

<ul>
<li><a href="http://www.rubydoc.info/github/rmosolgo/graphql-ruby/file/guides/introduction.md">Introduction</a></li>
<li><a href="http://www.rubydoc.info/github/rmosolgo/graphql-ruby/file/guides/defining_your_schema.md">Defining Your Schema</a></li>
<li><a href="http://www.rubydoc.info/github/rmosolgo/graphql-ruby/file/guides/executing_queries.md">Executing Queries</a></li>
<li><a href="http://www.rubydoc.info/github/rmosolgo/graphql-ruby/file/guides/testing.md">Testing</a></li>
<li><a href="http://www.rubydoc.info/github/rmosolgo/graphql-ruby/file/guides/code_reuse.md">Code Reuse</a></li>
<li><a href="http://www.rubydoc.info/github/rmosolgo/graphql-ruby/file/guides/security.md">Security</a></li>
</ul></li>
<li><p><a href="http://www.rubydoc.info/github/rmosolgo/graphql-ruby">API Documentation</a></p></li>
</ul>

<h2>Installation</h2>

<p>Install from RubyGems by adding it to your <code>Gemfile</code>, then bundling.</p>
<pre class="highlight ruby"><code><span class="c1"># Gemfile</span>
<span class="n">gem</span> <span class="s1">'graphql'</span>
</code></pre><pre class="highlight plaintext"><code>$ bundle install
</code></pre>
<h2>Overview</h2>

<h4>Declare types &amp; build a schema</h4>
<pre class="highlight ruby"><code><span class="c1"># Declare a type...</span>
<span class="no">PostType</span> <span class="o">=</span> <span class="no">GraphQL</span><span class="o">::</span><span class="no">ObjectType</span><span class="p">.</span><span class="nf">define</span> <span class="k">do</span>
  <span class="nb">name</span> <span class="s2">"Post"</span>
  <span class="n">description</span> <span class="s2">"A blog post"</span>

  <span class="n">field</span> <span class="ss">:id</span><span class="p">,</span> <span class="o">!</span><span class="n">types</span><span class="o">.</span><span class="no">ID</span>
  <span class="n">field</span> <span class="ss">:title</span><span class="p">,</span> <span class="o">!</span><span class="n">types</span><span class="o">.</span><span class="no">String</span>
  <span class="n">field</span> <span class="ss">:body</span><span class="p">,</span> <span class="o">!</span><span class="n">types</span><span class="o">.</span><span class="no">String</span>
  <span class="n">field</span> <span class="ss">:comments</span><span class="p">,</span> <span class="n">types</span><span class="p">[</span><span class="o">!</span><span class="no">CommentType</span><span class="p">]</span>
<span class="k">end</span>

<span class="c1"># ...and a query root</span>
<span class="no">QueryType</span> <span class="o">=</span> <span class="no">GraphQL</span><span class="o">::</span><span class="no">ObjectType</span><span class="p">.</span><span class="nf">define</span> <span class="k">do</span>
  <span class="nb">name</span> <span class="s2">"Query"</span>
  <span class="n">description</span> <span class="s2">"The query root of this schema"</span>

  <span class="n">field</span> <span class="ss">:post</span> <span class="k">do</span>
    <span class="n">type</span> <span class="no">PostType</span>
    <span class="n">argument</span> <span class="ss">:id</span><span class="p">,</span> <span class="o">!</span><span class="n">types</span><span class="o">.</span><span class="no">ID</span>
    <span class="n">resolve</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">ctx</span><span class="p">)</span> <span class="p">{</span> <span class="no">Post</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="s2">"id"</span><span class="p">])</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1"># Then create your schema</span>
<span class="no">Schema</span> <span class="o">=</span> <span class="no">GraphQL</span><span class="o">::</span><span class="no">Schema</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span>
  <span class="ss">query: </span><span class="no">QueryType</span><span class="p">,</span>
  <span class="ss">max_depth: </span><span class="mi">8</span><span class="p">,</span>
<span class="p">)</span>
</code></pre>
<h4>Execute queries</h4>

<p>Execute GraphQL queries on a given schema, from a query string.</p>
<pre class="highlight ruby"><code><span class="n">result_hash</span> <span class="o">=</span> <span class="no">Schema</span><span class="p">.</span><span class="nf">execute</span><span class="p">(</span><span class="n">query_string</span><span class="p">)</span>
<span class="c1"># {</span>
<span class="c1">#   "data" =&gt; {</span>
<span class="c1">#     "post" =&gt; {</span>
<span class="c1">#        "id" =&gt; 1,</span>
<span class="c1">#        "title" =&gt; "GraphQL is nice"</span>
<span class="c1">#     }</span>
<span class="c1">#   }</span>
<span class="c1"># }</span>
</code></pre>
<h4>Use with Relay</h4>

<p>If you&#39;re building a backend for <a href="http://facebook.github.io/relay/">Relay</a>, you&#39;ll need:</p>

<ul>
<li>A JSON dump of the schema, which you can get by sending <a href="https://github.com/rmosolgo/graphql-ruby/blob/master/lib/graphql/introspection/introspection_query.rb"><code>GraphQL::Introspection::INTROSPECTION_QUERY</code></a></li>
<li>Relay-specific helpers for GraphQL like Connections, node fields, and global ids. Here&#39;s one example of those: <a href="https://github.com/rmosolgo/graphql-relay-ruby"><code>graphql-relay</code></a></li>
</ul>

<h2>Goals</h2>

<ul>
<li>Implement the GraphQL spec &amp; support a Relay front end</li>
<li>Provide idiomatic, plain-Ruby API with similarities to reference implementation where possible</li>
<li>Support Ruby on Rails and Relay</li>
</ul>

<h2>Getting Involved</h2>

<ul>
<li><strong>Say hi &amp; ask questions</strong> in the <a href="https://graphql-slack.herokuapp.com/">#ruby channel on Slack</a> or <a href="https://twitter.com/rmosolgo">on Twitter</a>!</li>
<li><strong>Report bugs</strong> by posting a description, full stack trace, and all relevant code in a  <a href="https://github.com/rmosolgo/graphql-ruby/issues">GitHub issue</a>.</li>
<li><strong>Features &amp; patches</strong> are welcome! Consider discussing it in an <a href="https://github.com/rmosolgo/graphql-ruby/issues">issue</a> or in the <a href="https://graphql-slack.herokuapp.com/">#ruby channel on Slack</a> to make sure we&#39;re on the same page.</li>
<li><strong>Run the tests</strong> with <code>rake test</code> or start up guard with <code>bundle exec guard</code>.</li>
</ul>

<h2>Related Projects</h2>

<h3>Code</h3>

<ul>
<li><code>graphql-ruby</code> + Rails demo (<a href="https://github.com/rmosolgo/graphql-ruby-demo">src</a> / <a href="http://graphql-ruby-demo.herokuapp.com">heroku</a>)</li>
<li><a href="https://github.com/shopify/graphql-batch"><code>graphql-batch</code></a>, a batched query execution strategy</li>
<li><a href="https://github.com/rmosolgo/graphql-relay-ruby">Example Relay support</a> in Ruby</li>
<li><a href="https://github.com/rmosolgo/graphql-libgraphqlparser"><code>graphql-libgraphqlparser</code></a>, bindings to <a href="https://github.com/graphql/libgraphqlparser">libgraphqlparser</a>, a C-level parser.</li>
</ul>

<h3>Blog Posts</h3>

<ul>
<li> Building a blog in GraphQL and Relay on Rails <a href="https://medium.com/@gauravtiwari/graphql-and-relay-on-rails-getting-started-955a49d251de">Introduction</a>, <a href="https://medium.com/@gauravtiwari/graphql-and-relay-on-rails-creating-types-and-schema-b3f9b232ccfc">Part 1</a>, <a href="https://medium.com/@gauravtiwari/graphql-and-relay-on-rails-first-relay-powered-react-component-cb3f9ee95eca">Part 2</a></li>
<li><a href="https://medium.com/@khor/relay-facebook-on-rails-8b4af2057152">https://medium.com/@khor/relay-facebook-on-rails-8b4af2057152</a></li>
<li><a href="https://blog.jacobwgillespie.com/from-rest-to-graphql-b4e95e94c26b#.4cjtklrwt">https://blog.jacobwgillespie.com/from-rest-to-graphql-b4e95e94c26b#.4cjtklrwt</a></li>
<li><a href="http://mgiroux.me/2015/getting-started-with-rails-graphql-relay/">http://mgiroux.me/2015/getting-started-with-rails-graphql-relay/</a></li>
<li><a href="http://mgiroux.me/2015/uploading-files-using-relay-with-rails/">http://mgiroux.me/2015/uploading-files-using-relay-with-rails/</a></li>
</ul>

<h2>To Do</h2>

<ul>
<li>Accept type name as <code>type</code> argument?

<ul>
<li>Goal: accept <code>field :post, &quot;Post&quot;</code> to look up a type named <code>&quot;Post&quot;</code> in the schema</li>
<li>Problem: how does a field know which schema to look up the name from?</li>
<li>Problem: how can we load types in Rails without accessing the constant?</li>
<li>Maybe support by third-party library? <code>type(&quot;Post!&quot;)</code> could implement &quot;type_missing&quot;, keeps <code>graphql-ruby</code> very simple</li>
</ul></li>
<li>Type check improvements:

<ul>
<li>Use catch-all type/field/argument definitions instead of terminating traversal</li>
<li>Reduce ad-hoc traversals?</li>
</ul></li>
<li>Merge <code>graphql-relay-ruby</code> into this Repo so that they can stay in sync?</li>
</ul>

</div>

        </div>
      </div>
    </div>
  </body>
</html>
